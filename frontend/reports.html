<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Reports</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .report-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .report-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
        }
        .action-btn {
            transition: all 0.2s;
        }
        .action-btn:hover {
            transform: scale(1.05);
        }
        @media (max-width: 768px) {
            .report-card > div {
                flex-direction: column !important;
                text-align: center;
            }
            .action-btn {
                margin-top: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="page-container">
        <h1>View Reports 📊</h1>
        <p style="color: #6c757d; margin-bottom: 2em;">Select a report to generate and view comprehensive library analytics.</p>
        
        <!-- Report Options -->
        <div class="reports-container" style="display: grid; gap: 1.5em; margin-bottom: 2em;">
            
            <!-- Overdue Books Report -->
            <div class="report-card" style="background: white; padding: 1.5em; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border-left: 4px solid #e74c3c;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin: 0 0 0.5em 0; color: #2c3e50;">📅 Overdue Books Report</h3>
                        <p style="margin: 0; color: #6c757d;">View all books that have not been returned on time and calculate fines.</p>
                    </div>
                    <button onclick="generateOverdueReport()" class="action-btn" style="background: #e74c3c; color: white; border: none; padding: 0.8em 1.5em; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        Generate Report
                    </button>
                </div>
            </div>

            <!-- Most Borrowed Books Report -->
            <div class="report-card" style="background: white; padding: 1.5em; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border-left: 4px solid #28a745;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin: 0 0 0.5em 0; color: #2c3e50;">📚 Most Borrowed Books</h3>
                        <p style="margin: 0; color: #6c757d;">See a ranking of the most popular books in the library collection.</p>
                    </div>
                    <button onclick="generatePopularBooksReport()" class="action-btn" style="background: #28a745; color: white; border: none; padding: 0.8em 1.5em; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        Generate Report
                    </button>
                </div>
            </div>

            <!-- User Activity Report -->
            <div class="report-card" style="background: white; padding: 1.5em; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border-left: 4px solid #007bff;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin: 0 0 0.5em 0; color: #2c3e50;">👥 User Activity Report</h3>
                        <p style="margin: 0; color: #6c757d;">View active users and their borrowing patterns and statistics.</p>
                    </div>
                    <button onclick="generateUserActivityReport()" class="action-btn" style="background: #007bff; color: white; border: none; padding: 0.8em 1.5em; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        Generate Report
                    </button>
                </div>
            </div>

            <!-- Fine Collection Report -->
            <div class="report-card" style="background: white; padding: 1.5em; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border-left: 4px solid #ffc107;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin: 0 0 0.5em 0; color: #2c3e50;">💰 Fine Collection Report</h3>
                        <p style="margin: 0; color: #6c757d;">Track outstanding and collected fines with detailed breakdown.</p>
                    </div>
                    <button onclick="generateFineReport()" class="action-btn" style="background: #ffc107; color: #212529; border: none; padding: 0.8em 1.5em; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        Generate Report
                    </button>
                </div>
            </div>

            <!-- Library Statistics -->
            <div class="report-card" style="background: white; padding: 1.5em; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border-left: 4px solid #6f42c1;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin: 0 0 0.5em 0; color: #2c3e50;">📈 Library Statistics</h3>
                        <p style="margin: 0; color: #6c757d;">Overall library usage and collection analytics dashboard.</p>
                    </div>
                    <button onclick="generateLibraryStats()" class="action-btn" style="background: #6f42c1; color: white; border: none; padding: 0.8em 1.5em; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        Generate Report
                    </button>
                </div>
            </div>

        </div>

        <!-- Report Display Area -->
        <div id="reportDisplay" style="background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); padding: 2em; margin-bottom: 2em; display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5em; flex-wrap: wrap; gap: 1em;">
                <h2 id="reportTitle" style="margin: 0; color: #2c3e50;">Report Results</h2>
                <div>
                    <button onclick="printReport()" style="background: #17a2b8; color: white; border: none; padding: 0.6em 1em; border-radius: 6px; cursor: pointer; margin-right: 0.5em;">
                        🖨️ Print
                    </button>
                    <button onclick="exportReport()" style="background: #28a745; color: white; border: none; padding: 0.6em 1em; border-radius: 6px; cursor: pointer;">
                        📊 Export CSV
                    </button>
                </div>
            </div>
            <div id="reportContent" style="min-height: 200px;">
                <!-- Report content will be loaded here -->
            </div>
        </div>
        
        <button onclick="backToDashboard()" style="background: #6c757d; color: white; border: none; padding: 0.8em 1.5em; border-radius: 6px; cursor: pointer; text-decoration: none; display: inline-block;">
            ← Back to Dashboard
        </button>
    </div>

    <script src="script.js"></script>
</body>
</html>
            <button type="button" id="backBtn" class="back-btn" onclick="goBackToRoleSelect()" style="margin-left:1em;display:none;">Back</button>
        </form>
    </main>
    <footer>&copy; 2025 Library Management</footer>
    <script src="script.js"></script>
    